#
#  Copyright (c) 2020 NetEase Inc.
#
#  Licensed under the Apache License, Version 2.0 (the "License");
#  you may not use this file except in compliance with the License.
#  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.
#

#
# Global settings
#
global.log_level=0
global.ip=127.0.0.1
global.port=8201
global.subnet=127.0.0.0/24
global.enable_external_server=false
global.external_ip=127.0.0.1
global.external_subnet=127.0.0.0/24
global.chunk_size=16777216
global.meta_page_size=4096
global.location_limit=3000

global.min_io_alignment=512

#
# MDS settings
#
mds.listen.addr=127.0.0.1:6666
mds.register_retries=100
mds.register_timeout=1000
mds.heartbeat_interval=1
mds.heartbeat_timeout=5000

#
# Chunkserver settings
#
chunkserver.stor_uri=local://./1/
chunkserver.meta_uri=local://./1/chunkserver.dat
chunkserver.disk_type=nvme
chunkserver.snapshot_throttle_throughput_bytes=41943040
chunkserver.snapshot_throttle_check_cycles=4

#
# Testing purpose settings
#
test.create_testcopyset=false
test.testcopyset_poolid=666
test.testcopyset_copysetid=888888
test.testcopyset_conf=127.0.0.1:8200:0,127.0.0.1:8201:0,127.0.0.1:8202:0

#
# Copyset settings
#
copyset.check_term=true
copyset.disable_cli=false
copyset.log_applied_task=false
copyset.election_timeout_ms=5000
copyset.snapshot_interval_s=30
copyset.catchup_margin=50
copyset.chunk_data_uri=local://./1/copysets
copyset.raft_log_uri=local://./1/copysets
copyset.raft_meta_uri=local://./1/copysets
copyset.raft_snapshot_uri=local://./1/copysets
copyset.recycler_uri=local://./1/recycler
copyset.max_inflight_requests=5000
copyset.load_concurrency=5
copyset.check_retrytimes=3
copyset.finishload_margin=2000
copyset.check_loadmargin_interval_ms=1000
# enable O_DSYNC when open chunkfile
copyset.enable_odsync_when_open_chunkfile=false
# sync timer timeout interval
copyset.synctimer_interval_ms=30000
# check syncing interval
copyset.check_syncing_interval_ms=500

#
# Clone settings
#
clone.disable_curve_client=false
clone.disable_s3_adapter=false
clone.slice_size=1048576
clone.enable_paste=false
clone.thread_num=10
clone.queue_depth=100
curve.root_username=root
curve.root_password=
curve.config_path=conf/cs_client.conf
s3.config_path=conf/s3.conf

#
# Local FileSystem settings
#
fs.enable_renameat2=true

#
# metrics settings
# true means on, false means off
#
metric.onoff=true

#
# Storage engine settings
#
storeng.sync_write=false

#
# QoS settings
#

#
# Concurrent apply module
#
wconcurrentapply.size=10
wconcurrentapply.queuedepth=1
rconcurrentapply.size=5
rconcurrentapply.queuedepth=1

#
# Chunkfile pool
#
chunkfilepool.enable_get_chunk_from_pool=false
chunkfilepool.chunk_file_pool_dir=./1/chunkfilepool/
chunkfilepool.meta_path=./1/chunkfilepool.meta
chunkfilepool.cpmeta_file_size=4096
chunkfilepool.retry_times=5

#
# WAL file pool
#
# walpool是否共用chunkfilepool，如果为true，则以下配置无效
walfilepool.use_chunk_file_pool=true
walfilepool.enable_get_segment_from_pool=false
walfilepool.file_pool_dir=./1/walfilepool/
walfilepool.meta_path=./1/walfilepool.meta
walfilepool.segment_size=8388608
walfilepool.metapage_size=4096
walfilepool.meta_file_size=4096
walfilepool.retry_times=5

#
# trash settings
#
trash.expire_afterSec=120
trash.scan_periodSec=60
